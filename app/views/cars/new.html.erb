<h1>Add New Car</h1>

<%= link_to 'Back', user_cars_path, class: 'btn btn-primary' %>
<br>
<% if Brand.all && Model.all && Variant.all && KilometerRange.all && Year.last && City.all && State.all && Condition.all  %>
  
<div class="row justify-content-center car-add">
  <div class="col-md-4 border">
    <%= form_for( [current_user, @car]) do |form| %>
      <%= render partial: "shared/error_messages", locals: {var: @car} %>
      <br>
      <div class="form-group">
        <%= form.label :brand %>   
        <%= form.collection_select :brand, Brand.all, :name, :name, include_blank: "Please Select", class: 'form-control' %>
      </div>
      
      <div class="form-group">
        <%= form.label :model %>
        
        <%= form.grouped_collection_select :model, Brand.all, :models, :name, :name, :name, include_blank: "Please Select", class: 'form-control' %>
      </div>
      <div class="form-group">
        <%= form.label :variant %>
        
        <%= form.collection_select :variant, Variant.all, :name, :name, include_blank: "Please Select", class: 'form-control' %>
      </div>
      <div class="form-group">
        <%= form.label :kilometer_range %>
        
        <%= form.collection_select :kilometer_range, KilometerRange.all, :name, :name, include_blank: "Please Select", class: 'form-control' %>
      </div>
      <div class="form-group">
        <%= form.label :year %>
        
        <%= form.select :year, (((Year.last.start.to_i)..(Year.last.end.to_i)).to_a), include_blank: "Please Select", class: 'form-control' %>
      </div>
      <div class="form-group">
        <%= form.label :city %>
        
        <%= form.collection_select :city, City.all, :name, :name, include_blank: "Please Select", class: 'form-control' %>
      </div>
      <div class="form-group">
        <%= form.label :state %>
        
        <%= form.collection_select :state, State.all, :name, :name , include_blank: "Please Select", class: 'form-control' %>
      </div> 
    
      <div class="form-group">
        <%= form.label :condition %>
        
        <%= form.collection_select :condition, Condition.all, :condition, :condition , include_blank: "Please Select", class: 'form-control' %>
      </div> 
      
      <%= form.submit "Add Car" , class: "btn btn-success" %>
      
    <% end %>
  </div>
</div>
  <% else %>
  
  <h3 class="text-center display-4 px-20">Sorry, Service Unavailable</h3>
  
<% end %>
